<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Registered Students</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="students.html" class="active">Registered Students</a></li>
    </ul>
  </nav>

  <header>
    <h1>Registered Students</h1>
    <p>View, edit, or delete student records.</p>
  </header>

  <main>
    <section class="display-section">
      <div class="table-container">
        <table id="studentTable">
          <thead>
            <tr>
              <th>Name</th>
              <th>Student ID</th>
              <th>Email</th>
              <th>Contact</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="tableBody">
            <!-- Filled by JS -->
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <script>
    const tableBody = document.getElementById("tableBody");

    function insertRow(student, index) {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${student.name}</td>
        <td>${student.studentId}</td>
        <td>${student.email}</td>
        <td>${student.contact}</td>
        <td>
          <button class="action-btn edit-btn" onclick="editStudent(${index})">Edit</button>
          <button class="action-btn delete-btn" onclick="deleteStudent(${index})">Delete</button>
        </td>
      `;
      tableBody.appendChild(row);
    }

    function updateTable() {
      tableBody.innerHTML = "";
      const students = JSON.parse(localStorage.getItem("students")) || [];
      students.forEach((student, index) => insertRow(student, index));
    }

    function deleteStudent(index) {
      if (confirm("Are you sure you want to delete this record?")) {
        const students = JSON.parse(localStorage.getItem("students")) || [];
        students.splice(index, 1);
        localStorage.setItem("students", JSON.stringify(students));
        updateTable();
      }
    }

    function editStudent(index) {
      window.location.href = "index.html?edit=" + index;
    }

    window.onload = updateTable;
  </script>
</body>
</html>
